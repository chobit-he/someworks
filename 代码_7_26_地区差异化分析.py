# -*- coding: utf-8 -*-import urllib.request, json, xml.dom.minidom, refrom 代码_4_16_获取豆瓣API的数据 import open_urldef getcity(uids):	url = '%s/%s' % (p_url, uids)	html = open_url(url)	html = json.loads(html.read().decode('utf-8'))	try:city = html['loc_name']	except:city = '未知'	result_list.append([uids, city])def mainprocess(bids):	url = '%s/%s/reviews' % (base_url, bids)	html = open_url(url)	html = json.loads(html.read().decode('utf-8'))	reviews_num = html['total']	n = 1	while reviews_num > 100 * (n-1):		url = '%s/%s/reviews?count=100&start=%d' % (base_url, bids, 100 * (n-1))		html = open_url(url)		html = json.loads(html.read().decode('utf-8'))		for i in html['reviews']:			a = i['author']			getcity(a['uid'])		n += 1acc_headers = {'Authorization': 'Bearer a14afef0f66fcffce3e0fcd2e34f6ff4'}base_url = 'https://api.douban.com/v2/book'p_url = 'https://api.douban.com/v2/user'deep_int = 0result_list = []mainprocess('1803022')print(result_list)